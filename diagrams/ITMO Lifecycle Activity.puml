@startuml

title ITMO Lifecycle \n

start

partition ITMOs do not yet exist {
    
    :Cooperative Approach Authorized;
      note left
        decision 2 CMA.3, annex, para 18(g)
        * participating Party authorizes Cooperative Approach
      end note
  
    :Party registers Cooperative Approach authorization;
      note left
        decision 2 CMA.3, annex, para 18
        * Party submits initial report to register authorization
        * One or more combinations of authorizations of
            Coooperative Approach,
            ITMOs relating to the Cooperative Approach, and
            Entities (participating Parties?)
      end note
  
    :Secretariat (issuing authority) assigns Authorization ID
    Secretariat registers Cooperative Approach
    in CARP and Common Nomenclatures;
      note left
        * Authorization ID must be assigned by secretariat to ensure uniqueness
        * Secretariat will also register authorized objects in International Registry
      end note
    
    :Party registers ITMO;
    
    note left
        * If not previously registered with Cooperative Approach

    end note
    
    :Insert Acccounts into Registry;
    
    note left
        * Use International Registry InsertAccount API
            to insert accounts into registry
    end note
    
    }

partition ITMOs exist in Party registry {
    
    :ITMOs created by FTP Registry;
    
    note left
        * ITMOs created internally in FTP Registry
    end note
    
    :First Transfer of ITMOs;
    
    note left
        * This is an internal transfer Action proposal to the International Registry
    end note
    
}

partition ITMOs exist in International Registry {
    
    repeat
    
        fork
            : Use or Cancel ITMOs;
            stop
        fork again
            :Transfer ITMOs;
        end fork
        
    repeat while ()
    
}

@enduml
